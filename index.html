<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <title>Duty Manager - Official List</title>
    <style>
        :root { --dark: #1e272e; --blue: #00d2ff; --viber: #7360f2; --red: #ff3f34; --green: #05c46b; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; background: #f1f2f6; overflow: hidden; }
        
        #sidebar { width: 380px; background: var(--dark); color: white; padding: 25px; overflow-y: auto; flex-shrink: 0; }
        .box { background: rgba(255,255,255,0.08); padding: 15px; border-radius: 12px; margin-bottom: 20px; }
        h3 { color: var(--blue); margin-top: 0; font-size: 13px; text-transform: uppercase; }
        input { width: 100%; padding: 10px; margin-bottom: 8px; border-radius: 6px; border: none; background: #2f3542; color: white; box-sizing: border-box; }
        
        .list-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; margin-bottom: 5px; font-size: 13px; }
        .remove-btn { color: var(--red); cursor: pointer; font-weight: bold; font-size: 18px; }

        #main { flex-grow: 1; padding: 30px; overflow-y: auto; display: flex; flex-direction: column; align-items: center; }
        #canvas { width: 100%; max-width: 520px; background: white; border-radius: 40px; padding: 30px; box-shadow: 0 20px 50px rgba(0,0,0,0.15); }
        
        .live-banner { background: #000; color: white; padding: 25px; border-radius: 30px; text-align: center; margin-bottom: 25px; border-bottom: 5px solid var(--blue); }
        .clock { font-size: 45px; font-weight: 900; color: var(--blue); }
        
        .row-container { padding: 15px; border-bottom: 1px solid #eee; }
        .today-active { background: var(--red) !important; color: white !important; border-radius: 25px; }
        select { border: 1px solid #ddd; padding: 6px; border-radius: 6px; font-weight: bold; width: 180px; }

        .gen-btn { width: 100%; padding: 20px; background: var(--green); color: white; border: none; border-radius: 15px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>

<div id="sidebar">
    <h2>Duty <span style="font-weight:200;">Manager</span></h2>
    <div class="box">
        <h3>ğŸ“… áƒáƒ˜áƒ áƒ©áƒ˜áƒ”áƒ— áƒ—áƒ•áƒ”</h3>
        <input type="month" id="workMonth" onchange="initApp()">
    </div>
    <div class="box">
        <h3>ğŸ‘¥ áƒáƒ”áƒ áƒ¡áƒáƒœáƒáƒšáƒ˜</h3>
        <input type="text" id="addName" placeholder="áƒ¡áƒáƒ®áƒ”áƒšáƒ˜ áƒ’áƒ•áƒáƒ áƒ˜">
        <input type="text" id="addPhone" placeholder="áƒ¢áƒ”áƒšáƒ”áƒ¤áƒáƒœáƒ˜">
        <button onclick="addToStaff()" style="width:100%; padding:10px; background:var(--blue); border:none; border-radius:6px; font-weight:bold; cursor:pointer;">+ áƒ“áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ</button>
        <div id="staffListUI" style="margin-top:15px;"></div>
    </div>
    <div class="box">
        <h3>ğŸ›¡ï¸ áƒáƒáƒ¡áƒ£áƒ®áƒ˜áƒ¡áƒ›áƒ’áƒ”áƒ‘áƒšáƒ”áƒ‘áƒ˜</h3>
        <div id="adminListUI"></div>
    </div>
</div>

<div id="main">
    <div id="canvas">
        <div class="live-banner">
            <div id="liveDate">áƒ›áƒ˜áƒ£áƒ—áƒ˜áƒ—áƒ”áƒ— áƒ—áƒ•áƒ”</div>
            <div id="liveClock" class="clock">00:00:00</div>
            <div id="liveName" style="font-size:26px; font-weight:bold; margin-top:10px;">- - -</div>
        </div>
        <div id="scheduleBody"></div>
        <div id="adminFooter"></div>
    </div>
    <button class="gen-btn" onclick="exportFinal()">ğŸ“‹ áƒ¡áƒáƒ‘áƒáƒšáƒáƒ áƒ™áƒáƒ“áƒ˜áƒ¡ áƒ™áƒáƒáƒ˜áƒ áƒ”áƒ‘áƒ</button>
</div>

<script>
    // áƒ¨áƒ”áƒœáƒ˜ áƒ¡áƒ˜áƒ áƒ áƒ”áƒáƒšáƒ£áƒ áƒ˜ áƒœáƒáƒ›áƒ áƒ”áƒ‘áƒ˜áƒ—
    let staff = [
        {name: "áƒ’áƒ˜áƒáƒ áƒ’áƒ˜ áƒšáƒáƒ›áƒ˜áƒ«áƒ”", phone: "555 558 222"},
        {name: "áƒ•áƒáƒ¡áƒ˜áƒš áƒ’áƒáƒ’áƒáƒšáƒáƒ«áƒ”", phone: "557 949 827"},
        {name: "áƒ‘áƒ”áƒ¥áƒ áƒ¢áƒáƒšáƒáƒ®áƒáƒ«áƒ”", phone: "551 982 772"},
        {name: "áƒ’áƒ˜áƒáƒ áƒ’áƒ˜ áƒ¢áƒáƒ áƒ§áƒáƒ¨áƒ•áƒ˜áƒšáƒ˜", phone: "577 385 250"},
        {name: "áƒáƒšáƒ˜áƒ™áƒ áƒ§áƒáƒšáƒ˜áƒ©áƒáƒ•áƒ", phone: "551 688 899"},
        {name: "áƒ¨áƒáƒšáƒ•áƒ áƒ’áƒáƒ’áƒœáƒ˜áƒ«áƒ”", phone: "551 770 200"},
        {name: "áƒ’áƒ£áƒ’áƒ áƒ‘áƒáƒšáƒáƒœáƒ©áƒ˜áƒ•áƒáƒ«áƒ”", phone: "577 978 792"},
        {name: "áƒ’áƒ˜áƒáƒ áƒ’áƒ˜ áƒ‘áƒáƒ¬áƒáƒ áƒ˜áƒ¨áƒ•áƒ˜áƒšáƒ˜", phone: "591 92 78 31"}
    ];
    let admins = [
        {name: "áƒ£áƒ©áƒ áƒ›áƒ­áƒ”áƒ“áƒšáƒ˜áƒ¨áƒ•áƒ˜áƒšáƒ˜", phone: "599 47 00 33"},
        {name: "áƒ—áƒ”áƒ›áƒ áƒ’áƒ”áƒšáƒáƒ¨áƒ•áƒ˜áƒšáƒ˜", phone: "577 698 890"}
    ];
    
    let schedule = [];
    const kaMonths = ["áƒ˜áƒáƒœáƒ•áƒáƒ áƒ˜", "áƒ—áƒ”áƒ‘áƒ”áƒ áƒ•áƒáƒšáƒ˜", "áƒ›áƒáƒ áƒ¢áƒ˜", "áƒáƒáƒ áƒ˜áƒšáƒ˜", "áƒ›áƒáƒ˜áƒ¡áƒ˜", "áƒ˜áƒ•áƒœáƒ˜áƒ¡áƒ˜", "áƒ˜áƒ•áƒšáƒ˜áƒ¡áƒ˜", "áƒáƒ’áƒ•áƒ˜áƒ¡áƒ¢áƒ", "áƒ¡áƒ”áƒ¥áƒ¢áƒ”áƒ›áƒ‘áƒ”áƒ áƒ˜", "áƒáƒ¥áƒ¢áƒáƒ›áƒ‘áƒ”áƒ áƒ˜", "áƒœáƒáƒ”áƒ›áƒ‘áƒ”áƒ áƒ˜", "áƒ“áƒ”áƒ™áƒ”áƒ›áƒ‘áƒ”áƒ áƒ˜"];
    const kaDays = ["áƒ™áƒ•áƒ˜áƒ áƒ", "áƒáƒ áƒ¨áƒáƒ‘áƒáƒ—áƒ˜", "áƒ¡áƒáƒ›áƒ¨áƒáƒ‘áƒáƒ—áƒ˜", "áƒáƒ—áƒ®áƒ¨áƒáƒ‘áƒáƒ—áƒ˜", "áƒ®áƒ£áƒ—áƒ¨áƒáƒ‘áƒáƒ—áƒ˜", "áƒáƒáƒ áƒáƒ¡áƒ™áƒ”áƒ•áƒ˜", "áƒ¨áƒáƒ‘áƒáƒ—áƒ˜"];

    function addToStaff() {
        const n = document.getElementById('addName'), p = document.getElementById('addPhone');
        if(n.value && p.value) {
            staff.push({name: n.value, phone: p.value});
            n.value = ""; p.value = "";
            initApp();
        }
    }

    function initApp() {
        const mVal = document.getElementById('workMonth').value;
        if(!mVal) return;
        const [year, month] = mVal.split('-');
        const daysInMonth = new Date(year, month, 0).getDate();
        schedule = [];
        for(let d=1; d<=daysInMonth; d++) {
            schedule.push({ day: d, person: staff[(d-1) % staff.length] });
        }
        render();
    }

    function render() {
        const mVal = document.getElementById('workMonth').value;
        if(!mVal) return;
        const [year, month] = mVal.split('-');

        document.getElementById('staffListUI').innerHTML = staff.map((s,i) => `
            <div class="list-item"><span>${s.name}</span><span class="remove-btn" onclick="staff.splice(${i},1);initApp()">Ã—</span></div>`).join('');
        document.getElementById('adminListUI').innerHTML = admins.map(a => `
            <div class="list-item"><span>ğŸ›¡ï¸ ${a.name}</span></div>`).join('');

        let html = "";
        schedule.forEach((item, idx) => {
            let dObj = new Date(year, month-1, item.day);
            let options = staff.map(s => `<option value="${s.name}" ${s.name === item.person.name ? 'selected' : ''}>${s.name}</option>`).join('');
            html += `
                <div class="row-container" data-day="${item.day}">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <span><b>${item.day}</b> ${kaDays[dObj.getDay()]}</span>
                        <select onchange="schedule[${idx}].person=staff.find(s=>s.name==this.value);render()">${options}</select>
                    </div>
                </div>`;
        });
        document.getElementById('scheduleBody').innerHTML = html;

        let admH = `<div style="margin-top:25px; padding:20px; background:#fff9e6; border-radius:25px; border:2px dashed #f1c40f;"><h4 style="text-align:center;margin:0 0 10px 0;">ğŸ›¡ï¸ áƒáƒáƒ¡áƒ£áƒ®áƒ˜áƒ¡áƒ›áƒ’áƒ”áƒ‘áƒšáƒ”áƒ‘áƒ˜</h4>`;
        admins.forEach(a => admH += `<div style="display:flex; justify-content:space-between; font-size:14px; margin-bottom:5px;"><span>${a.name}</span><b>${a.phone}</b></div>`);
        document.getElementById('adminFooter').innerHTML = admH + '</div>';

        syncClock();
    }

    function syncClock() {
        if(window.iv) clearInterval(window.iv);
        window.iv = setInterval(() => {
            const n = new Date();
            document.getElementById('liveClock').innerText = n.toLocaleTimeString('ka-GE');
            document.getElementById('liveDate').innerText = kaDays[n.getDay()] + ", " + n.getDate() + " " + kaMonths[n.getMonth()];
            const today = schedule.find(s => s.day === n.getDate());
            if(today) {
                document.getElementById('liveName').innerText = today.person.name;
                document.querySelectorAll('.row-container').forEach(r => r.classList.toggle('today-active', r.dataset.day == n.getDate()));
            }
        }, 1000);
    }

    function exportFinal() {
        const mVal = document.getElementById('workMonth').value;
        const [year, month] = mVal.split('-');
        let rows = "";
        schedule.forEach(item => {
            let dObj = new Date(year, month-1, item.day);
            let p = item.person.phone.replace(/\s/g,'');
            rows += `
            <div class="r \${${item.day}==new Date().getDate()?'act':''} ${[0,6].includes(dObj.getDay())?'wk':''}" data-d="${item.day}">
                <div class="info">
                    <div class="date"><b>${item.day}</b> ${kaDays[dObj.getDay()]}</div>
                    <div class="name">${item.person.name}</div>
                    <div class="phone">${item.person.phone}</div>
                </div>
                <div class="btns">
                    <a href="viber://chat?number=%2B995${p.slice(-9)}" class="v-btn">VIBER</a>
                    <a href="tel:${p}" class="c-btn">ğŸ“</a>
                </div>
            </div>`;
        });

        const final = `<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body { font-family: sans-serif; background: #f0f2f5; display: flex; justify-content: center; padding: 15px; margin: 0; }
    .card { max-width: 480px; width: 100%; background: white; border-radius: 40px; padding: 25px; box-shadow: 0 15px 40px rgba(0,0,0,0.1); }
    .top { background: #1a1a1a; color: white; padding: 30px; border-radius: 30px; text-align: center; margin-bottom: 25px; border-bottom: 6px solid #00d2ff; }
    .clock { font-size: 45px; font-weight: 900; color: #00d2ff; }
    .r { display: flex; align-items: center; padding: 20px 15px; border-bottom: 1px solid #eee; justify-content: space-between; }
    .act { background: #ff3f34 !important; color: white !important; border-radius: 25px; font-weight: bold; transform: scale(1.02); }
    .wk { background: #fcfcfc; }
    .name { font-size: 19px; margin-bottom: 2px; }
    .phone { font-size: 18px; font-weight: 800; color: #2d3436; display: block; margin-top: 5px; }
    .act .phone { color: white; }
    .btns { display: flex; gap: 10px; }
    .v-btn { background: #7360f2; color: white; text-decoration: none; padding: 10px 15px; border-radius: 12px; font-size: 11px; font-weight: bold; }
    .c-btn { background: #2ecc71; color: white; text-decoration: none; padding: 10px 15px; border-radius: 12px; font-size: 16px; }
    .adm { margin-top: 30px; background: #fff9e6; padding: 25px; border-radius: 30px; border: 2px dashed #f1c40f; }
</style></head><body>
<div class="card">
    <div class="top"><div id="t_d"></div><div id="t_c" class="clock">00:00:00</div><div id="t_n" style="font-size:26px; font-weight:bold; margin-top:10px;">-</div></div>
    <h3 style="text-align:center; color:#333;">${kaMonths[month-1]} ${year}</h3>
    ${rows}
    <div class="adm"><h4 style="text-align:center;margin:0 0 10px 0;">ğŸ›¡ï¸ áƒáƒáƒ¡áƒ£áƒ®áƒ˜áƒ¡áƒ›áƒ’áƒ”áƒ‘áƒšáƒ”áƒ‘áƒ˜</h4>
    ${admins.map(a=>`<div style="display:flex; justify-content:space-between; margin-bottom:10px; font-size:15px;"><span>${a.name}</span><b>${a.phone}</b></div>`).join('')}
    </div>
</div>
<script>
    const kaD=["áƒ™áƒ•áƒ˜áƒ áƒ","áƒáƒ áƒ¨áƒáƒ‘áƒáƒ—áƒ˜","áƒ¡áƒáƒ›áƒ¨áƒáƒ‘áƒáƒ—áƒ˜","áƒáƒ—áƒ®áƒ¨áƒáƒ‘áƒáƒ—áƒ˜","áƒ®áƒ£áƒ—áƒ¨áƒáƒ‘áƒáƒ—áƒ˜","áƒáƒáƒ áƒáƒ¡áƒ™áƒ”áƒ•áƒ˜","áƒ¨áƒáƒ‘áƒáƒ—áƒ˜"], kaM=["áƒ˜áƒáƒœáƒ•áƒáƒ áƒ˜","áƒ—áƒ”áƒ‘áƒ”áƒ áƒ•áƒáƒšáƒ˜","áƒ›áƒáƒ áƒ¢áƒ˜","áƒáƒáƒ áƒ˜áƒšáƒ˜","áƒ›áƒáƒ˜áƒ¡áƒ˜","áƒ˜áƒ•áƒœáƒ˜áƒ¡áƒ˜","áƒ˜áƒ•áƒšáƒ˜áƒ¡áƒ˜","áƒáƒ’áƒ•áƒ˜áƒ¡áƒ¢áƒ","áƒ¡áƒ”áƒ¥áƒ¢áƒ”áƒ›áƒ‘áƒ”áƒ áƒ˜","áƒáƒ¥áƒ¢áƒáƒ›áƒ‘áƒ”áƒ áƒ˜","áƒœáƒáƒ”áƒ›áƒ‘áƒ”áƒ áƒ˜","áƒ“áƒ”áƒ™áƒ”áƒ›áƒ‘áƒ”áƒ áƒ˜"];
    function tick() {
        const n=new Date(), d=n.getDate();
        document.getElementById('t_c').innerText=n.toLocaleTimeString('ka-GE');
        document.getElementById('t_d').innerText=kaD[n.getDay()]+", "+d+" "+kaM[n.getMonth()];
        document.querySelectorAll('.r').forEach(r=>{
            if(r.dataset.d==d){ r.classList.add('act'); document.getElementById('t_n').innerText=r.querySelector('.name').innerText; }
            else r.classList.remove('act');
        });
    } setInterval(tick, 1000); tick();
<\/script></body></html>`;

        const area = document.createElement('textarea');
        area.value = final; document.body.appendChild(area); area.select();
        document.execCommand('copy'); document.body.removeChild(area);
        alert("âœ… áƒ¡áƒáƒ‘áƒáƒšáƒáƒ áƒ™áƒáƒ“áƒ˜ áƒ“áƒáƒ™áƒáƒáƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜áƒ!");
    }
</script>
</body>
</html>
